const e=localStorage.getItem("user"),t=(localStorage.getItem("avatar"),"https://js2-7158b-default-rtdb.europe-west1.firebasedatabase.app/");async function n(e){const n=t+e,s=await fetch(n);return await s.json()}const s=localStorage.getItem("user"),a=localStorage.getItem("avatar"),o=document.querySelector("#user-avatar"),c=document.querySelector("#user-name"),r=document.querySelector("#all-posts");var l,u,i;document.querySelector("#homepage-btn").addEventListener("click",(()=>{location.assign("../html/homePage.html")})),l=s,u=a,i=c,o.src=u,i.innerText=l,async function(){const e=await n("users.json"),t=Object.values(e),a=Object.keys(e);!function(e){let t=0;e.forEach((e=>{const{username:n}=e;if(s==n){const e=a[t];console.log(a[t]),localStorage.setItem("userId",e)}t++}))}(t)}(),setTimeout((()=>{d()}),200);const m=document.querySelector("#make-post");async function d(){const e=await n(`users/${localStorage.getItem("userId")}/posts.json`),t=Object.values(e);var s;s=t,r.innerHTML="",s.forEach((e=>{const{message:t}=e,n=document.createElement("div");r.prepend(n),n.innerText=t}))}document.querySelector("#post-btn").addEventListener("click",(async()=>{const e=await n("users.json");!async function(e){e.forEach((e=>{const{username:n}=e;if(s!=n)setTimeout((()=>{d(),m.value=""}),400);else{console.log("hej");let o=new Date;async function a(e){const n=t+`users/${localStorage.getItem("userId")}/posts.json`,s={method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}},a=await fetch(n,s);await a.json()}a({message:m.value,time:o.getTime()})}}))}(Object.values(e))}));!async function(t){const s=await n("users.json");Object.values(s).forEach((n=>{const{username:s,avatar:a}=n;if(null!=s&&null!=a&&s!=e){const e=document.createElement("div");t.append(e);const n=document.createElement("div"),o=document.createElement("img");n.innerText=s,o.src=a,e.append(n,o),e.addEventListener("click",(()=>{localStorage.setItem("viewUser",s),localStorage.setItem("viewUserAvatar",a),setTimeout((()=>{location.assign("../html/usersPage.html")}),100)}))}}))}(document.querySelector("#user-list"));document.querySelector("#delete-btn").addEventListener("click",(async()=>{const e=await n("users.json");!async function(e){e.forEach((e=>{const{username:n}=e;if(s===n){!async function(){const e=t+`users/${localStorage.getItem("userId")}.json`,n=await fetch(e,{method:"DELETE"});await n.json()}()}}))}(Object.values(e)),setTimeout((()=>{location.assign("../index.html")}),400)}));const g=document.querySelector("#log-out-btn");g.addEventListener("click",(()=>{location.assign("../index.html")}));
//# sourceMappingURL=myPage.abd1ed86.js.map
