{"mappings":"AAAA,MAAMA,EAAcC,aAAaC,QAAQ,QAG5BC,GAFSF,aAAaC,QAAQ,UAEZ,qEAiBxBE,eAAeC,EAAgBC,GAClC,MAAMC,EAAWJ,EAAUG,EAErBE,QAAiBC,MAAMF,GAG7B,aAFmBC,EAASE,MAGhC,CC3BA,MAAMC,EAAkBV,aAAaC,QAAQ,YACvCU,EAAwBX,aAAaC,QAAQ,kBAK/BW,SAASC,cAAc,iBAC/BC,iBAAiB,SAAS,KAClCC,YAAW,KACPC,SAASC,OAAO,2BACjB,QAcPd,iBACI,MAAMe,QAAad,EAAgB,cAE7Be,EAAYC,OAAOC,OAAOH,GAC1BI,EAAWF,OAAOG,KAAKL,IAG7B,SAAwBM,GACpB,IAAIC,EAAY,EAChBD,EAAME,SAASC,IACX,MAAMC,SAAEA,GAAaD,EACrB,GAAIjB,GAAmBkB,EAAU,CAC7B,MAAMC,EAAcP,EAASG,GAC7BzB,aAAa8B,QAAQ,cAAeD,EACxC,CACAJ,GAAA,GAER,CAXAM,CAAeZ,EAYnB,CA7BAa,GACAjB,YAAW,MAiCXZ,iBACI,MAAMe,QAAad,EAAgB,SAASJ,aAAaC,QAAQ,6BAEjE,GAAYgC,MAARf,EAAmB,CACnB,MAAMC,EAAYC,OAAOC,OAAOH,GAYlBgB,EAXDf,EAYjBgB,EAASC,UAAY,GACrBF,EAAUR,SAASR,IACf,MAAMmB,QAAEA,GAAYnB,EACdoB,EAAc1B,SAAS2B,cAAc,OAC3CJ,EAASK,QAAQF,GACjBA,EAAYG,UAAYJ,CAAA,GAhB5B,KACK,CACD,MAAMK,EAAiB9B,SAAS2B,cAAc,KAC9CJ,EAASQ,OAAOD,GAChBA,EAAeD,UAAY,iBAC/B,CAKJ,IAAsBP,CAHtB,CA7CIU,EAAA,GACD,KAEH,MAAMC,EAAgBjC,SAASC,cAAc,gBACvCiC,EAAclC,SAASC,cAAc,cDWpC,IAAuBkC,EAAMC,EAAyCC,EAA/CF,ECThBrC,EDSsBsC,ECTLrC,EDS8CsC,ECTRH,EAAfD,EDWpCK,IAAMF,EACpBC,EAAgBR,UAAYM,ECWhC,MAAMZ,EAAWvB,SAASC,cAAc,eDNjCV,eAA2BgD,GAE9B,MAAMjC,QAAad,EAAgB,cACjBgB,OAAOC,OAAOH,GAItBQ,SAAS0B,IACX,MAAMxB,SAAEA,EAAQoB,OAAEA,GAAWI,EAC7B,GAAgBnB,MAAZL,GAAmCK,MAAVe,GAAuBpB,GAAY7B,EAAa,CACzE,MAAMsD,EAAWzC,SAAS2B,cAAc,OACxCY,EAAYR,OAAOU,GAEnB,MAAMC,EAAW1C,SAAS2B,cAAc,OAClCgB,EAAU3C,SAAS2B,cAAc,OACvCe,EAASb,UAAYb,EACrB2B,EAAQL,IAAMF,EACdK,EAASV,OAAOW,EAAUC,GAE1BF,EAASvC,iBAAiB,SAAS,KAC/Bd,aAAa8B,QAAQ,WAAYF,GACjC5B,aAAa8B,QAAQ,iBAAkBkB,GACvCjC,YAAW,KACPC,SAASC,OAAO,4BACjB,OAEX,IAGZ,CCSA,CADoBL,SAASC,cAAc,eAI3C,MAAM2C,EAAY5C,SAASC,cAAc,gBAClC2C,EDTC1C,iBAAiB,SAAS,KAC1BE,SAASC,OAAO","sources":["src/modules/multiUseFunctions.ts","src/modules/usersPage.ts"],"sourcesContent":["const currentUser = localStorage.getItem('user');\r\nconst currentAvatar = localStorage.getItem('avatar');\r\n\r\nexport const baseUrl: string = 'https://js2-7158b-default-rtdb.europe-west1.firebasedatabase.app/'\r\n\r\n// structure of database user-object\r\nexport type firebaseUser = {\r\n    username: string,\r\n    avatar: string,\r\n    password: string,\r\n    posts: postObject\r\n}\r\n\r\n// structure of database user posts-object\r\nexport type postObject = {\r\n    message: string,\r\n    time: number\r\n}\r\n\r\n// get firebase data\r\nexport async function getFirebaseData(url: string) {\r\n    const fetchUrl = baseUrl + url;\r\n\r\n    const response = await fetch(fetchUrl);\r\n    const data = await response.json();\r\n\r\n    return data\r\n}\r\n\r\n// create user profile\r\nexport function createProfile(user, avatar, avatarElement: HTMLImageElement, usernameElement: HTMLElement) {\r\n\r\n    avatarElement.src = avatar;\r\n    usernameElement.innerText = user;\r\n}\r\n\r\n\r\n// shows list of users + lets user view their profile\r\nexport async function getUserList(userListDiv: HTMLDivElement) {\r\n\r\n    const data = await getFirebaseData('users.json');\r\n    const userArray = Object.values(data);\r\n\r\n    listOfUsers(userArray)\r\n    function listOfUsers(array) {\r\n        array.forEach((list: firebaseUser) => {\r\n            const { username, avatar } = list;\r\n            if (username != undefined && avatar != undefined && username != currentUser) {\r\n                const userInfo = document.createElement('div');\r\n                userListDiv.append(userInfo);\r\n\r\n                const userName = document.createElement('div');\r\n                const userImg = document.createElement('img');\r\n                userName.innerText = username;\r\n                userImg.src = avatar;\r\n                userInfo.append(userName, userImg);\r\n\r\n                userInfo.addEventListener('click', () => {\r\n                    localStorage.setItem('viewUser', username);\r\n                    localStorage.setItem('viewUserAvatar', avatar);\r\n                    setTimeout(() => {\r\n                        location.assign('../html/usersPage.html');\r\n                    }, 100);\r\n                })\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n// lets user log out, redirects user to login-page\r\nexport function logOut(btn: HTMLButtonElement) {\r\n    btn.addEventListener('click', () => {\r\n        location.assign('../index.html')\r\n    })\r\n}","const currentViewUser = localStorage.getItem('viewUser');\r\nconst currentViewUserAvatar = localStorage.getItem('viewUserAvatar');\r\n\r\nimport { logOut, createProfile, getUserList, getFirebaseData, postObject, firebaseUser } from \"./multiUseFunctions\";\r\n\r\n// redirects user to homepage\r\nconst homepageBtn = document.querySelector('#homepage-btn') as HTMLButtonElement;\r\nhomepageBtn.addEventListener('click', () => {\r\n    setTimeout(() => {\r\n        location.assign('../html/homePage.html');\r\n    }, 100);\r\n})\r\n\r\ngetId();\r\nsetTimeout(() => {\r\n    getPost();\r\n}, 200);\r\n\r\nconst displayAvatar = document.querySelector('#user-avatar') as HTMLImageElement;\r\nconst displayName = document.querySelector('#user-name') as HTMLElement;\r\n\r\ncreateProfile(currentViewUser, currentViewUserAvatar, displayAvatar, displayName);\r\n\r\n// get user id to get user posts\r\nasync function getId() {\r\n    const data = await getFirebaseData(`users.json`);\r\n\r\n    const userArray = Object.values(data);\r\n    const keyArray = Object.keys(data);\r\n\r\n    idFromDatabase(userArray)\r\n    function idFromDatabase(array) {\r\n        let i: number = 0;\r\n        array.forEach((info: firebaseUser) => {\r\n            const { username } = info;\r\n            if (currentViewUser == username) {\r\n                const currentView = keyArray[i];\r\n                localStorage.setItem('currentView', currentView);\r\n            }\r\n            i++;\r\n        })\r\n    }\r\n}\r\n\r\nconst postsDiv = document.querySelector('#all-posts') as HTMLDivElement;\r\n\r\n// gets posts for user or shows message if no posts has been made\r\nasync function getPost() {\r\n    const data = await getFirebaseData(`users/${localStorage.getItem('currentView')}/posts.json`);\r\n\r\n    if (data != undefined) {\r\n        const userArray = Object.values(data);\r\n        showAllPosts(userArray);\r\n    }\r\n    else {\r\n        const noPostsMessage = document.createElement('p');\r\n        postsDiv.append(noPostsMessage);\r\n        noPostsMessage.innerText = 'no posts yet :('\r\n    }\r\n\r\n}\r\n\r\n// displays posts from database\r\nfunction showAllPosts(postArray) {\r\n    postsDiv.innerHTML = '';\r\n    postArray.forEach((data: postObject) => {\r\n        const { message } = data;\r\n        const displayPost = document.createElement('div');\r\n        postsDiv.prepend(displayPost);\r\n        displayPost.innerText = message;\r\n    });\r\n}\r\n\r\n\r\n// gets list of users from database and displays them in div\r\nconst userListDiv = document.querySelector('#user-list') as HTMLDivElement;\r\ngetUserList(userListDiv);\r\n\r\n// log out redirects to login-page\r\nconst logOutBtn = document.querySelector('#log-out-btn') as HTMLButtonElement;\r\nlogOut(logOutBtn);"],"names":["$690f99fc8af240e0$var$currentUser","localStorage","getItem","$690f99fc8af240e0$export$a135e81e9a047f61","async","$690f99fc8af240e0$export$35d7b35fee7b6919","url","fetchUrl","response","fetch","json","$b0b8eeb741aa2d67$var$currentViewUser","$b0b8eeb741aa2d67$var$currentViewUserAvatar","document","querySelector","addEventListener","setTimeout","location","assign","data","userArray","Object","values","keyArray","keys","array","i","forEach","info","username","currentView","setItem","idFromDatabase","$b0b8eeb741aa2d67$var$getId","undefined","postArray","$b0b8eeb741aa2d67$var$postsDiv","innerHTML","message","displayPost","createElement","prepend","innerText","noPostsMessage","append","$b0b8eeb741aa2d67$var$getPost","$b0b8eeb741aa2d67$var$displayAvatar","$b0b8eeb741aa2d67$var$displayName","user","avatar","usernameElement","src","userListDiv","list","userInfo","userName","userImg","$b0b8eeb741aa2d67$var$logOutBtn"],"version":3,"file":"usersPage.ca70ee2c.js.map"}