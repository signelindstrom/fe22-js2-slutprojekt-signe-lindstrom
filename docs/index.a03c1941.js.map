{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-648f9682b55c9179.js","src/modules/multiUseFunctions.ts","src/index.ts","node_modules/@parcel/runtime-js/lib/runtime-41f82db53b179fa4.js","node_modules/@parcel/runtime-js/lib/runtime-8b237db9ba65c260.js","node_modules/@parcel/runtime-js/lib/runtime-8c1b9c4053811c46.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"l1gf1\\\":\\\"index.a03c1941.js\\\",\\\"2N1RG\\\":\\\"frog-emoji.f8178103.png\\\",\\\"esnKb\\\":\\\"snake-emoji.9cbb8289.png\\\",\\\"kqi8x\\\":\\\"lizard-emoji.65350939.png\\\"}\"));","const currentUser = localStorage.getItem('user');\r\nconst currentAvatar = localStorage.getItem('avatar');\r\n\r\nexport const baseUrl: string = 'https://js2-7158b-default-rtdb.europe-west1.firebasedatabase.app/'\r\n\r\n// structure of database user-object\r\nexport type firebaseUser = {\r\n    username: string,\r\n    avatar: string,\r\n    password: string,\r\n    posts: postObject\r\n}\r\n\r\n// structure of database user posts-object\r\nexport type postObject = {\r\n    message: string,\r\n    time: number\r\n}\r\n\r\n// get firebase data\r\nexport async function getFirebaseData(url: string) {\r\n    const fetchUrl = baseUrl + url;\r\n\r\n    const response = await fetch(fetchUrl);\r\n    const data = await response.json();\r\n\r\n    return data\r\n}\r\n\r\n// create user profile\r\nexport function createProfile(user, avatar, avatarElement: HTMLImageElement, usernameElement: HTMLElement) {\r\n\r\n    avatarElement.src = avatar;\r\n    usernameElement.innerText = user;\r\n}\r\n\r\n\r\n// shows list of users + lets user view their profile\r\nexport async function getUserList(userListDiv: HTMLDivElement) {\r\n\r\n    const data = await getFirebaseData('users.json');\r\n    const userArray = Object.values(data);\r\n\r\n    listOfUsers(userArray)\r\n    function listOfUsers(array) {\r\n        array.forEach((list: firebaseUser) => {\r\n            const { username, avatar } = list;\r\n            if (username != undefined && avatar != undefined && username != currentUser) {\r\n                const userInfo = document.createElement('div');\r\n                userListDiv.append(userInfo);\r\n\r\n                const userName = document.createElement('div');\r\n                const userImg = document.createElement('img');\r\n                userName.innerText = username;\r\n                userImg.src = avatar;\r\n                userInfo.append(userName, userImg);\r\n\r\n                userInfo.addEventListener('click', () => {\r\n                    localStorage.setItem('viewUser', username);\r\n                    localStorage.setItem('viewUserAvatar', avatar);\r\n                    setTimeout(() => {\r\n                        location.assign('../html/usersPage.html');\r\n                    }, 100);\r\n                })\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n// lets user log out, redirects user to login-page\r\nexport function logOut(btn: HTMLButtonElement) {\r\n    btn.addEventListener('click', () => {\r\n        location.assign('../index.html')\r\n    })\r\n}","import { baseUrl, firebaseUser, getFirebaseData } from \"./modules/multiUseFunctions\";\r\n\r\nconst loginBtn = document.querySelector('#login-btn') as HTMLButtonElement;\r\nconst signupBtn = document.querySelector('#signup-btn') as HTMLButtonElement;\r\nconst userChoiceDiv = document.querySelector('#user-choice') as HTMLElement;\r\nconst userInputDiv = document.querySelector('#user-input') as HTMLElement;\r\n\r\nlet newUser: boolean = false;\r\nlet addNewUser: boolean = false;\r\n\r\nlet userAvatar: string = '';\r\n\r\ndocument.querySelector('#login-headline')?.addEventListener('click', () => {\r\n    location.reload();\r\n})\r\n\r\n\r\n// login existing user or sign up new user\r\nloginBtn.addEventListener('click', () => {\r\n    console.log('login');\r\n    userInputDiv.style.display = 'inline-block';\r\n    userChoiceDiv.style.display = 'none'\r\n})\r\n\r\nsignupBtn.addEventListener('click', () => {\r\n    newUser = true;\r\n    console.log('signup');\r\n    userInputDiv.style.display = 'inline-block';\r\n    userChoiceDiv.style.display = 'none'\r\n\r\n    userChooseAvatar();\r\n})\r\n\r\n\r\nconst userInputForm = document.querySelector('#user-input') as HTMLFormElement;\r\nuserInputForm.addEventListener('submit', (event) => {\r\n    event.preventDefault();\r\n\r\n    getUserData();\r\n})\r\n\r\nconst usernameInput = document.querySelector('#username-input') as HTMLInputElement;\r\nconst passwordInput = document.querySelector('#password-input') as HTMLInputElement;\r\n\r\nconst errorMessage = document.createElement('p');\r\nerrorMessage.classList.add('errorMessage');\r\nuserInputForm.append(errorMessage);\r\n\r\n// takes value from inputs and compares to data in database\r\nasync function getUserData() {\r\n\r\n    const data = await getFirebaseData('users.json');\r\n    const userArray = Object.values(data);\r\n\r\n    // login existing user\r\n    if (newUser == false) {\r\n        loginUser(userArray);\r\n\r\n        function loginUser(array) {\r\n            for(let i = 0; i<array.length; i++) {\r\n                const { username, password, avatar } = array[i];\r\n                if (usernameInput.value == username && passwordInput.value == password) {\r\n                    errorMessage.innerText = '';\r\n                    localStorage.setItem('user', usernameInput.value);\r\n                    localStorage.setItem('password', passwordInput.value);\r\n                    localStorage.setItem('avatar', avatar);\r\n                    setTimeout(() => {\r\n                        window.location.href = \"./html/homePage.html\"\r\n                    }, 400);\r\n                    break;\r\n                }\r\n                else errorMessage.innerText = 'username or password is wrong :('\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    // sign up new user\r\n    if (newUser == true) {\r\n        signUpUser(userArray);\r\n\r\n        function signUpUser(array) {\r\n            for(let i = 0; i<array.length; i++) {\r\n                const { username, password } = array[i];\r\n                if (usernameInput.value == username && passwordInput.value == password) {\r\n                    errorMessage.innerText = 'user already exist, try logging in instead :)'\r\n                    addNewUser = false;\r\n                    break;\r\n                }\r\n                else if (usernameInput.value == username) {\r\n                    errorMessage.innerText = 'name already in use :('\r\n                    addNewUser = false;\r\n                    break;\r\n                }\r\n                else if (usernameInput.value != username) {\r\n                    addNewUser = true;\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    // adds new user to database\r\n    if (addNewUser == true && userAvatar != '') {\r\n        const createUser = {\r\n            username: usernameInput.value,\r\n            password: passwordInput.value,\r\n            avatar: userAvatar\r\n        }\r\n\r\n        postNewUser(createUser);\r\n        async function postNewUser(obj: object) {\r\n            const url = baseUrl + 'users.json'\r\n\r\n            const init = {\r\n                method: 'POST',\r\n                body: JSON.stringify(obj),\r\n                headers: {\r\n                    'Content-type': \"application/json; charset=UTF-8\"\r\n                }\r\n            }\r\n\r\n            const response = await fetch(url, init);\r\n            const data = await response.json();\r\n        }\r\n\r\n        localStorage.setItem('user', usernameInput.value);\r\n        localStorage.setItem('password', passwordInput.value);\r\n        localStorage.setItem('avatar', userAvatar);\r\n\r\n        setTimeout(() => {\r\n            window.location.href = \"./html/homePage.html\"\r\n            // location.assign('../html/homePage.html');\r\n        }, 400);\r\n\r\n    }\r\n}\r\n\r\n\r\nconst loginContainerDiv = document.querySelector('#login-container') as HTMLDivElement;\r\n\r\n// choose avatar for new user\r\nfunction userChooseAvatar() {\r\n    const avatarDiv = document.createElement('div');\r\n    avatarDiv.classList.add('avatarDiv');\r\n\r\n    const avatar1 = document.createElement('img');\r\n    const avatar2 = document.createElement('img');\r\n    const avatar3 = document.createElement('img');\r\n\r\n    const pickAvatarMessage = document.createElement('p');\r\n    pickAvatarMessage.classList.add('errorMessage');\r\n    pickAvatarMessage.innerText = 'Please pick an avatar!'\r\n\r\n    loginContainerDiv.append(avatarDiv);\r\n    avatarDiv.append(pickAvatarMessage, avatar1, avatar2, avatar3);\r\n\r\n    const avatarImg1 = new URL('./media/frog-emoji.png', import.meta.url);\r\n    avatar1.src = avatarImg1.href;\r\n    const avatarImg2 = new URL('./media/snake-emoji.png', import.meta.url);\r\n    avatar2.src = avatarImg2.href;\r\n    const avatarImg3 = new URL('./media/lizard-emoji.png', import.meta.url);\r\n    avatar3.src = avatarImg3.href;\r\n\r\n    avatar1.addEventListener('click', () => {\r\n        userAvatar = 'https://img.icons8.com/emoji/256/frog-emoji.png'\r\n    })\r\n    avatar2.addEventListener('click', () => {\r\n        userAvatar = 'https://img.icons8.com/emoji/256/snake-emoji.png'\r\n    })\r\n    avatar3.addEventListener('click', () => {\r\n        userAvatar = 'https://img.icons8.com/emoji/256/lizard-emoji.png'\r\n    })\r\n}","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2N1RG\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"esnKb\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"kqi8x\")).toString();"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","localStorage","getItem","$690f99fc8af240e0$export$a135e81e9a047f61","async","$690f99fc8af240e0$export$35d7b35fee7b6919","url","fetchUrl","response","fetch","json","$b4e14b6b8da86996$var$loginBtn","document","querySelector","$b4e14b6b8da86996$var$signupBtn","$b4e14b6b8da86996$var$userChoiceDiv","$b4e14b6b8da86996$var$userInputDiv","$b4e14b6b8da86996$var$newUser","$b4e14b6b8da86996$var$addNewUser","$b4e14b6b8da86996$var$userAvatar","addEventListener","location","reload","console","log","style","display","avatarDiv","createElement","classList","add","avatar1","avatar2","avatar3","pickAvatarMessage","innerText","$b4e14b6b8da86996$var$loginContainerDiv","append","avatarImg1","URL","$1be60149a8271831$exports","src","href","avatarImg2","$8c6ea15aae5851a4$exports","avatarImg3","$8fa9fa64e49aa860$exports","$b4e14b6b8da86996$var$userChooseAvatar","$b4e14b6b8da86996$var$userInputForm","event","preventDefault","data","userArray","values","loginUser","array","username","password","avatar","$b4e14b6b8da86996$var$usernameInput","value","$b4e14b6b8da86996$var$passwordInput","$b4e14b6b8da86996$var$errorMessage","setItem","setTimeout","window","signUpUser","postNewUser","obj","init","method","body","stringify","headers","$b4e14b6b8da86996$var$getUserData","resolve","toString"],"version":3,"file":"index.a03c1941.js.map"}